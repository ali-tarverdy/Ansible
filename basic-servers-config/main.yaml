---

- name: Change basic configuration of servers
  hosts: all
  become: yes
  tasks:
    - name: Change hostname of servers
      hostname:
        name: "ubuntu-srv"    # Replace with actual hostname (e.g. web01)

    - name: Change timezone of servers
      timezone:
        name: "Asia/Tehran"      # Replace with your timezone

    - name: Overwrite /etc/resolv.conf
      copy:
        dest: /etc/resolv.conf
        content: |
          nameserver 1.1.1.1
          nameserver 8.8.8.8
    
    - name: Install some packages (Debian)
      apt:
        name:
          - vim
          - curl
          - wget
          - tcpdump
          - htop
          - net-tools
      when: ansible_facts['os_family'] == "Debian"
    
    - name: Install some packages (Redhat)
      dnf:
        name:
          - vim
          - curl
          - wget
          - tcpdump
          - htop
          - net-tools
      when: ansible_facts["os_family"] == "RedHat"
    


